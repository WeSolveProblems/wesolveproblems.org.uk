---
problem_id: 65779
category_ids: 210 1238
difficulty: 4
classes: 9 10 11
source_id: 213994
layout: problemdb_problem
use_math: true
---

<h1>Problem ID 65779</h1>
<p>
 Every Friday ten gentlemen come to the club, and each one gives the doorman his hat. Each hat is just right for its owner, but there are no two identical hats. The gentlemen leave one by one in a random order.
<p>
  Seeing off the next gentleman, the club's doorman tries to put the first hat that he grabs on the gentleman’s head. If it fits $($not necessarily perfectly$)$, the gentleman leaves with that hat. If it is too small, the doorman tries the next random hat from the remaining ones. If all of the remaining hats turned out to be too small, the doorman says to the poor fellow: "Sir, you do not have a hat today," and the gentleman goes home with his head uncovered. Find the probability that next Friday the doorman will not have a single hat.

</p> 
<h1>Solution</h1> 
<p>
  Let the number of gentlemen be n. We number them in order of increasing sizes of their hats from 1 to n. No hat will remain, only if everyone takes their own hat. We denote the probability of this by $p_n$. If the k-th gentleman leaves first $($the probability of this is 1/n$)$, then the probability of him getting his hat is $\frac{1}{n-k + 1}$ $($because his hat is the only one among the n-k + 1 suitable for this gentleman$)$. If this happens, then the probability that all of the remaining will take their own hats is $p_{n-1}. By the formula of total probability, we obtain, <img src="65779 1.png">
 where
$H_n$ = 1 + 1/2 + ... + 1/n is the n-th harmonic number. Given that $p_1$ = 1 $($if there is only one gentleman, then he will necessarily take his hat$)$, we get <img src="65779 .gif">
.
<p>
  Substituting n = 10, we obtain $p_{10} = 1/10! \times (1 + 1/2) (1 + 1/2 + 1/3) ... (1 + 1/2 + ... + 1/10)$ ≈ 0.000516. This calculation can easily be done using a calculator or a computer.

</p> 
<h1>Answer</h1> 
<p>
≈ 0.000516.
</p>